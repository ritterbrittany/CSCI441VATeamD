<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMR Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="dashboard-container">
        <header>
            <h1>Welcome to Your EMR Dashboard</h1>
            <div class="user-info">
                <span>User: <strong>John Doe</strong></span>
                <span>Role: <strong>Doctor</strong></span>
            </div>
            <nav>
                <ul>
                    <li><a href="/patient-records">Patient Records</a></li>
                    <li><a href="/role-management">Role Management</a></li>
                    <li><a href="/settings">Settings</a></li>
                    <li><a href="/logout">Logout</a></li>
                </ul>
            </nav>
        </header>

        <section class="main-content">
            <h2>Dashboard Overview</h2>
            <p>Welcome, John Doe. Here are some quick actions:</p>
            <ul>
                <li><a href="/view-patient-records">View Patient Records</a></li>
                <li><a href="/assign-permissions">Assign Permissions</a></li>
            </ul>

            <!-- Medical Record Access Control -->
            <section id="medical-records-section">
                <h3>Access Patient Records</h3>
                <div id="permission-message"></div>
                <div id="patient-records-content">
                    <!-- Dynamic Patient Records will appear here based on Role -->
                </div>
            </section>
        </section>
    </div>

    <script>
        // Assuming the user role is dynamically fetched (e.g., from server-side session or JWT token)
        const userRole = 'Doctor'; // This would be dynamically set based on logged-in user role

        // Function to check user permissions for medical records
        function checkPermissionForRecords() {
            const permissionMessageElement = document.getElementById('permission-message');
            const patientRecordsContent = document.getElementById('patient-records-content');

            // Simulating role-based access control
            if (userRole === 'Doctor') {
                permissionMessageElement.innerHTML = 'You have access to view patient records.';
                permissionMessageElement.style.color = 'green';
                
                // Display patient records content
                patientRecordsContent.innerHTML = `
                    <div class="patient-tabs">
                        <ul>
                            <li><a href="#tab1">Patient A</a></li>
                            <li><a href="#tab2">Patient B</a></li>
                            <li><a href="#tab3">Patient C</a></li>
                        </ul>
                        <div id="tab1" class="tab-content">
                            <h4>Patient A - Details</h4>
                            <p>Age: 30, Diagnosis: Flu, Status: Recovering</p>
                        </div>
                        <div id="tab2" class="tab-content">
                            <h4>Patient B - Details</h4>
                            <p>Age: 45, Diagnosis: Diabetes, Status: Stable</p>
                        </div>
                        <div id="tab3" class="tab-content">
                            <h4>Patient C - Details</h4>
                            <p>Age: 60, Diagnosis: Hypertension, Status: Controlled</p>
                        </div>
                    </div>
                `;
            } else if (userRole === 'Nurse') {
                permissionMessageElement.innerHTML = 'You have limited access to view patient records.';
                permissionMessageElement.style.color = 'orange';
                patientRecordsContent.innerHTML = `
                    <p>You can view certain patient records as per your role. Please contact the admin for more details.</p>
                `;
            } else {
                permissionMessageElement.innerHTML = 'Permission Denied: You do not have access to view patient records.';
                permissionMessageElement.style.color = 'red';
                patientRecordsContent.innerHTML = '';
            }
        }

        // Call the function to check permissions and load content accordingly
        checkPermissionForRecords();
    </script>
</body>
</html>
